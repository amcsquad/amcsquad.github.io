---
layout: post
title: How to deal with external data formats?
date: '2020-08-09T13:19:00.005-07:00'
author: David Wardlaw
tags:
modified_time: '2020-08-09T13:19:47.559-07:00'
blogger_id: tag:blogger.com,1999:blog-5184156045713724288.post-3440385419745964770
blogger_orig_url: https://testingsoftwaretimes.blogspot.com/2020/08/how-to-deal-with-external-data-formats.html
---

<p><span style="font-family: courier;">This blog post is in response to Challenge 7 of the #GivenWhenThenWithStyle blog post series with Gojko Adzic&nbsp;</span></p><p><span style="font-family: courier;">You can see what the challenge is here:</span></p><p><a href="https://specflow.org/blog/how-to-deal-with-external-data-formats-givenwhenthenwithstyle/"><span style="font-family: courier;">https://specflow.org/blog/how-to-deal-with-external-data-formats-givenwhenthenwithstyle/</span></a></p><p><span style="font-family: courier;">Having the message format in the test would&nbsp; (as mentioned in the challenge) look terrible and would be difficult to understand.&nbsp;</span></p><p><span style="font-family: courier;">If I was to rewrite this scenario I would do something like the following:</span></p><p><span style="font-family: courier;">1) Write a test that tests the validity of the payment message. So something like</span></p><p><span style="font-family: courier;">Scenario : payment message validity</span></p><p><span style="font-family: courier;"><b>Given </b>an account EE382200221020145685 has a balance</span></p><p><span style="font-family: courier;"><b>When </b>the system receives a payment message</span></p><p><span style="font-family: courier;"><b>Then </b>the payment message is valid.&nbsp;</span></p><p><span style="font-family: courier;">I would store the actual payment message in another file as not to clutter the scenario file and this message would be passed into the test in the When</span></p><p><span style="font-family: courier;">line. The Then part of the test could cover various areas, such as:</span></p><p><span style="font-family: courier;">- All the correct tags are present&nbsp;</span></p><p><span style="font-family: courier;">- The xml is valid</span></p><p><span style="font-family: courier;">2) I would then add another test to make sure that the payment status report is valid:</span></p><p><span style="font-family: courier;"><b>Given </b>an account EE382200221020145685 has a balance</span></p><p><span style="font-family: courier;"><b>When </b>the system receives the payment message</span></p><p><span style="font-family: courier;"><b>Then </b>the payment report status is valid.&nbsp;</span></p><p><span style="font-family: courier;">3) I would then move onto testing the actual content of the message. I would speak to the business users and ask them what fields they really care about in the message and use them in my tests. So I would do something like this:</span></p><p><span style="font-family: courier;">Scenario: Transactions in payments&nbsp;</span></p><p><span style="font-family: courier;"><b>Given </b>an account EE382200221020145685 has balance of 100.00 EUR</span></p><p><span style="font-family: courier;"><b>When </b>the system receives the payment message with the following initiating party values</span></p><p><span style="font-family: courier;">| MsgID&nbsp; &nbsp; &nbsp; | CreditDateTime&nbsp; &nbsp; &nbsp;| Payment| InitiatingPArty|&nbsp;</span></p><p><span style="font-family: courier;">| MSGID000002| 2020-07-28T10:33:56| 22.00&nbsp; | Tom Nook&nbsp; &nbsp; &nbsp; &nbsp;|</span></p><p><span style="font-family: courier;">And the payment message has the following Payment information</span></p><p><span style="font-family: courier;">| PaymentMethod| PaymentAmount|Payment Date| AccountIBAN&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | FinancialINstitutionIDBIC| AccoumtIBAN&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|</span></p><p><span style="font-family: courier;">| TRF&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | 22.00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|2020-07-28 | AT611904300234573201 | ABAGATWWXXX&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | EE382200221020145685|</span></p><p><span style="font-family: courier;"><b>Then </b>the following values are returned in the payment report status</span></p><p><span style="font-family: courier;">|MsgID&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |CreditDateTime&nbsp; &nbsp; &nbsp; &nbsp;| OriginalMessageID|</span></p><p><span style="font-family: courier;">| STAT20200728103356001 | 2020-07-28T10:33:56 | MSGID000002&nbsp; &nbsp; &nbsp; |</span></p><p><span style="font-family: courier;"><br /></span></p><p><span style="font-family: courier;">Writing the tests in the above way will enable more tests to be written by expanding the test to use Examples. Also If the message is an industry standard one the business users will probably know what they look like off of the top of their head. So the value of the tests is to make sure that the content in&nbsp; important fields is correct not all of the fields in the messages. It also abstracts the message away from the tests in order to make them easier to read and focus the tests on whats important. The message can still be viewed as it would be stored in a file somewhere and a business users if they want could have a look at the file in which the message resides.&nbsp;</span></p><p><br /></p>